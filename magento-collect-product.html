<!--                       .                    . .        .  
                          _|_                   | |       _|_ 
.--.--. .-.  .-.. .-. .--. |  .-.  ____  .-..-. | | .-. .-.|  
|  |  |(   )(   |(.-' |  | | (   )      (  (   )| |(.-'(   |  
'  '  `-`-'`-`-`| `--''  `-`-'`-'        `-'`-' `-`-`--'`-'`-'
             ._.'   https://github.com/bobvanluijt/magento-collect -->

<link rel="import" href="../../bower_components/polymer/polymer.html">
<link rel="import" href="../../bower_components/iron-ajax/iron-ajax.html">
<link rel="import" href="../../magento-collect.html">

<dom-module id="magento-collect-product">
  <template>
    <style>
      :host {
        display: block;
      }
    </style>
    <content></content>
    <iron-ajax auto url="/rest/V1/products/[[collector]]" handle-as="json" last-response="{{response}}" on-response="onResponse" id="xhr"></iron-ajax>
 </template>
  <script>
      Polymer({
        is: 'magento-collect-product',
        properties: {
          collector: {
            type: String,
            notify: true
          },
          response: {
            type: String
          }
        },
        onResponse: function(response){
          var result = response.detail.response;
          this.fire('set-data', result)
        }
      })
  </script>
</dom-module>